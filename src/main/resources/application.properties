# GhostCheck application properties (Supabase PostgreSQL)
# Replace <SUPABASE_URL> with your Supabase host (e.g., db.<project>.supabase.co)
# Credentials are set below; consider using environment variables for production.

# Application
spring.application.name=ghostcheck
server.port=8080

# -------------------------
# Datasource (Supabase)
# -------------------------
spring.datasource.url=jdbc:postgresql://<SUPABASE_URL>:5432/postgres
spring.datasource.username=postgres
spring.datasource.password=.gQSrsmcBW$w4rk
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP (default connection pool)
spring.datasource.hikari.pool-name=GhostCheckHikariCP
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.validation-timeout=5000

# -------------------------
# JPA / Hibernate
# -------------------------
# Use validate for production; change to update/create-drop for local dev if needed
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy
spring.jpa.properties.hibernate.implicit_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# -------------------------
# Flyway (migrations)
# -------------------------
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# -------------------------
# Logging
# -------------------------
logging.level.root=INFO
logging.level.org.springframework=INFO
# Enable these only for troubleshooting; can be verbose
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{36} - %msg%n
# logging.file.name=logs/ghostcheck.log
# logging.file.max-size=10MB

# -------------------------
# Thymeleaf
# -------------------------
spring.thymeleaf.cache=true

# -------------------------
# Actuator
# -------------------------
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when_authorized

# -------------------------
# Misc
# -------------------------
spring.jackson.time-zone=UTC
server.shutdown=graceful

# -------------------------
# Environment variable alternatives (recommended)
# -------------------------
# spring.datasource.url=${SUPABASE_JDBC_URL:jdbc:postgresql://<SUPABASE_URL>:5432/postgres}
# spring.datasource.username=${SUPABASE_DB_USER:postgres}
# spring.datasource.password=${SUPABASE_DB_PASSWORD:.gQSrsmcBW$w4rk}
